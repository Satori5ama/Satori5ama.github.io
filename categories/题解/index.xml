<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>题解 on 终端出口</title><link>https://username.github.io/categories/%E9%A2%98%E8%A7%A3/</link><description>Recent content from 终端出口</description><generator>Hugo</generator><language>en</language><managingEditor>satori5ama@foxmail.com (Satori5ama)</managingEditor><webMaster>satori5ama@foxmail.com (Satori5ama)</webMaster><copyright>All articles on this blog are licensed under the BY-NC-SA license agreement unless otherwise stated. Please indicate the source when reprinting!</copyright><lastBuildDate>Thu, 08 May 2025 16:52:25 +0800</lastBuildDate><atom:link href="https://username.github.io/categories/%E9%A2%98%E8%A7%A3/index.xml" rel="self" type="application/rss+xml"/><item><title>The 2025 Hunan Multi-School Programming Training Contest Round 6 - F</title><link>https://username.github.io/post/2025-hunan-multi-school-6-f/</link><pubDate>Thu, 08 May 2025 08:52:25 +0800</pubDate><author>satori5ama@foxmail.com (Satori5ama)</author><guid>https://username.github.io/post/2025-hunan-multi-school-6-f/</guid><description>
<![CDATA[<h1>The 2025 Hunan Multi-School Programming Training Contest Round 6 - F</h1><p>Author: Satori5ama(satori5ama@foxmail.com)</p>
        
          <p><a href="https://codeforces.com/gym/603392/problem/K">Problem - K - Codeforces</a></p>
<p>To solve this problem, we need to determine if the students can be partitioned into two sets, A and B, such that A forms a complete subgraph (clique) and B forms an independent set (no edges between any two nodes in B). This problem can be efficiently solved by checking if the given graph is a split graph, which can be determined by analyzing the degree sequence of the graph.</p>
        
        <hr><p>Published on 2025-05-08 at <a href='https://username.github.io/'>终端出口</a>, last modified on 2025-05-08</p>]]></description><category>题解</category></item><item><title>XCTF - 我不是病毒2.0</title><link>https://username.github.io/post/xctf-i-am-not-a-virus/</link><pubDate>Mon, 23 Dec 2024 08:55:27 +0800</pubDate><author>satori5ama@foxmail.com (Satori5ama)</author><guid>https://username.github.io/post/xctf-i-am-not-a-virus/</guid><description>
<![CDATA[<h1>XCTF - 我不是病毒2.0</h1><p>Author: Satori5ama(satori5ama@foxmail.com)</p>
        
          <p>复现完以为自己写了wp，结果好像没有。只能转一篇了。</p>
<p><a href="https://eutop1a.github.io/2023/04/01/2023XCTF-Final/">2023XCTF-Final - Eutop1a</a></p>
        
        <hr><p>Published on 2024-12-23 at <a href='https://username.github.io/'>终端出口</a>, last modified on 2024-12-23</p>]]></description><category>题解</category></item><item><title>攻防世界 - Re150</title><link>https://username.github.io/post/adworld-re150/</link><pubDate>Thu, 21 Nov 2024 08:55:27 +0800</pubDate><author>satori5ama@foxmail.com (Satori5ama)</author><guid>https://username.github.io/post/adworld-re150/</guid><description>
<![CDATA[<h1>攻防世界 - Re150</h1><p>Author: Satori5ama(satori5ama@foxmail.com)</p>
        
          <p>参考文献：<a href="https://lrhtony.cn/2023/12/28/xctf-re150/">攻防世界-Re150 - lrhtony 的小站</a></p>
<p>查壳略。</p>
<p>IDA打开，发现没有main函数，只有一个start函数。</p>
<p>start函数的汇编代码：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-asm" data-lang="asm"><span class="line"><span class="cl"><span class="nl">.eh_frame:</span><span class="err">080488</span><span class="nf">D4</span> <span class="no">start</span>           <span class="no">proc</span> <span class="no">near</span>               <span class="c1">; DATA XREF: LOAD:08048018↑o
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.eh_frame:</span><span class="err">080488</span><span class="nf">D4</span>                                         <span class="c1">; start+22↓o
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.eh_frame:</span><span class="err">080488</span><span class="nf">D4</span>                 <span class="no">jmp</span>     <span class="no">short</span> <span class="no">loc_80488EB</span>
</span></span><span class="line"><span class="cl"><span class="nl">.eh_frame:</span><span class="err">080488</span><span class="nf">D4</span> <span class="c1">; ---------------------------------------------------------------------------
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.eh_frame:</span><span class="err">080488</span><span class="nf">D6</span>                 <span class="no">db</span> <span class="mi">20</span><span class="no">h</span>                  <span class="c1">; address 0x08048320
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.eh_frame:</span><span class="err">080488</span><span class="nf">D7</span>                 <span class="no">db</span>  <span class="mi">83</span><span class="no">h</span>
</span></span><span class="line"><span class="cl"><span class="nl">.eh_frame:</span><span class="err">080488</span><span class="nf">D8</span>                 <span class="no">db</span>    <span class="mi">4</span>
</span></span><span class="line"><span class="cl"><span class="nl">.eh_frame:</span><span class="err">080488</span><span class="nf">D9</span>                 <span class="no">db</span>    <span class="mi">8</span>
</span></span><span class="line"><span class="cl"><span class="nl">.eh_frame:</span><span class="err">080488</span><span class="nf">DA</span>                 <span class="no">db</span>  <span class="mi">20</span><span class="no">h</span>
</span></span><span class="line"><span class="cl"><span class="nl">.eh_frame:</span><span class="err">080488</span><span class="nf">DB</span>                 <span class="no">db</span>  <span class="mi">83</span><span class="no">h</span>
</span></span><span class="line"><span class="cl"><span class="nl">.eh_frame:</span><span class="err">080488</span><span class="nf">DC</span>                 <span class="no">db</span> <span class="mi">4</span>
</span></span><span class="line"><span class="cl"><span class="nl">.eh_frame:</span><span class="err">080488</span><span class="nf">DD</span>                 <span class="no">db</span>    <span class="mi">8</span>
</span></span><span class="line"><span class="cl"><span class="nl">.eh_frame:</span><span class="err">080488</span><span class="nf">DE</span>                 <span class="no">db</span> <span class="mi">32</span><span class="no">h</span>
</span></span><span class="line"><span class="cl"><span class="nl">.eh_frame:</span><span class="err">080488</span><span class="nf">DF</span>                 <span class="no">db</span>    <span class="mi">4</span>
</span></span><span class="line"><span class="cl"><span class="nl">.eh_frame:</span><span class="err">080488</span><span class="nf">E0</span>                 <span class="no">db</span>    <span class="mi">0</span>
</span></span><span class="line"><span class="cl"><span class="nl">.eh_frame:</span><span class="err">080488</span><span class="nf">E1</span>                 <span class="no">db</span> <span class="mi">0</span>
</span></span><span class="line"><span class="cl"><span class="nl">.eh_frame:</span><span class="err">080488</span><span class="nf">E2</span>                 <span class="no">db</span>  <span class="mi">73</span><span class="no">h</span> <span class="c1">; s
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.eh_frame:</span><span class="err">080488</span><span class="nf">E3</span>                 <span class="no">db</span>  <span class="mi">79</span><span class="no">h</span> <span class="c1">; y
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.eh_frame:</span><span class="err">080488</span><span class="nf">E4</span>                 <span class="no">db</span> <span class="mi">63</span><span class="no">h</span>
</span></span><span class="line"><span class="cl"><span class="nl">.eh_frame:</span><span class="err">080488</span><span class="nf">E5</span>                 <span class="no">db</span>  <span class="mi">6</span><span class="no">Ch</span> <span class="c1">; l
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.eh_frame:</span><span class="err">080488</span><span class="nf">E6</span>                 <span class="no">db</span>  <span class="mi">6</span><span class="no">Fh</span> <span class="c1">; o
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.eh_frame:</span><span class="err">080488</span><span class="nf">E7</span>                 <span class="no">db</span>  <span class="mi">76</span><span class="no">h</span> <span class="c1">; v
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.eh_frame:</span><span class="err">080488</span><span class="nf">E8</span>                 <span class="no">db</span> <span class="mi">65</span><span class="no">h</span>
</span></span><span class="line"><span class="cl"><span class="nl">.eh_frame:</span><span class="err">080488</span><span class="nf">E9</span>                 <span class="no">db</span>  <span class="mi">72</span><span class="no">h</span> <span class="c1">; r
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.eh_frame:</span><span class="err">080488</span><span class="nf">EA</span>                 <span class="no">db</span>  <span class="mi">0</span><span class="no">Ah</span>
</span></span><span class="line"><span class="cl"><span class="nl">.eh_frame:</span><span class="err">080488</span><span class="nf">EB</span> <span class="c1">; ---------------------------------------------------------------------------
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.eh_frame:</span><span class="err">080488</span><span class="nf">EB</span>
</span></span><span class="line"><span class="cl"><span class="nl">.eh_frame:</span><span class="err">080488</span><span class="nf">EB</span> <span class="no">loc_80488EB</span><span class="p">:</span>                            <span class="c1">; CODE XREF: start↑j
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.eh_frame:</span><span class="err">080488</span><span class="nf">EB</span>                 <span class="no">push</span>    <span class="no">ecx</span>
</span></span><span class="line"><span class="cl"><span class="nl">.eh_frame:</span><span class="err">080488</span><span class="nf">EC</span>                 <span class="no">push</span>    <span class="no">ebx</span>
</span></span><span class="line"><span class="cl"><span class="nl">.eh_frame:</span><span class="err">080488</span><span class="nf">ED</span>                 <span class="no">push</span>    <span class="no">edx</span>
</span></span><span class="line"><span class="cl"><span class="nl">.eh_frame:</span><span class="err">080488</span><span class="nf">EE</span>                 <span class="no">push</span>    <span class="no">edi</span>
</span></span><span class="line"><span class="cl"><span class="nl">.eh_frame:</span><span class="err">080488</span><span class="nf">EF</span>                 <span class="no">push</span>    <span class="no">esi</span>
</span></span><span class="line"><span class="cl"><span class="nl">.eh_frame:</span><span class="err">080488</span><span class="nf">F0</span>                 <span class="no">call</span>    <span class="no">$</span><span class="err">+</span><span class="mi">5</span>
</span></span><span class="line"><span class="cl"><span class="nl">.eh_frame:</span><span class="err">080488</span><span class="nf">F5</span>
</span></span><span class="line"><span class="cl"><span class="nl">.eh_frame:</span><span class="err">080488</span><span class="nf">F5</span> <span class="no">loc_80488F5</span><span class="p">:</span>                            <span class="c1">; DATA XREF: start+22↓o
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.eh_frame:</span><span class="err">080488</span><span class="nf">F5</span>                 <span class="no">pop</span>     <span class="no">ebp</span>             <span class="c1">; ebp = 0x080488F5
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.eh_frame:</span><span class="err">080488</span><span class="nf">F6</span>                 <span class="no">sub</span>     <span class="no">ebp</span><span class="p">,</span> <span class="p">(</span><span class="no">offset</span> <span class="no">loc_80488F5</span> <span class="p">-</span> <span class="no">offset</span> <span class="no">start</span><span class="p">)</span> <span class="c1">; ebp = start
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.eh_frame:</span><span class="err">080488</span><span class="nf">FC</span>                 <span class="no">mov</span>     <span class="no">eax</span><span class="p">,</span> <span class="mi">4</span>
</span></span><span class="line"><span class="cl"><span class="nl">.eh_frame:</span><span class="err">08048901</span>                 <span class="nf">mov</span>     <span class="no">ebx</span><span class="p">,</span> <span class="mi">1</span>          <span class="c1">; fd
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.eh_frame:</span><span class="err">08048906</span>                 <span class="nf">mov</span>     <span class="no">ecx</span><span class="p">,</span> <span class="mi">14</span>
</span></span><span class="line"><span class="cl"><span class="nl">.eh_frame:</span><span class="err">0804890</span><span class="nf">B</span>                 <span class="no">add</span>     <span class="no">ecx</span><span class="p">,</span> <span class="no">ebp</span>        <span class="c1">; addr
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.eh_frame:</span><span class="err">0804890</span><span class="nf">D</span>                 <span class="no">mov</span>     <span class="no">edx</span><span class="p">,</span> <span class="mi">9</span>          <span class="c1">; len
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.eh_frame:</span><span class="err">08048912</span>                 <span class="nf">int</span>     <span class="mi">80</span><span class="no">h</span>             <span class="c1">; LINUX - sys_write
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.eh_frame:</span><span class="err">08048914</span>                 <span class="nf">mov</span>     <span class="no">ecx</span><span class="p">,</span> <span class="mi">0</span><span class="no">Ah</span>
</span></span><span class="line"><span class="cl"><span class="nl">.eh_frame:</span><span class="err">08048919</span>                 <span class="nf">add</span>     <span class="no">ecx</span><span class="p">,</span> <span class="no">ebp</span>
</span></span><span class="line"><span class="cl"><span class="nl">.eh_frame:</span><span class="err">0804891</span><span class="nf">B</span>                 <span class="no">mov</span>     <span class="no">ecx</span><span class="p">,</span> <span class="p">[</span><span class="no">ecx</span><span class="p">]</span>
</span></span><span class="line"><span class="cl"><span class="nl">.eh_frame:</span><span class="err">0804891</span><span class="nf">D</span>                 <span class="no">mov</span>     <span class="no">edi</span><span class="p">,</span> <span class="mi">6</span>
</span></span><span class="line"><span class="cl"><span class="nl">.eh_frame:</span><span class="err">08048922</span>                 <span class="nf">add</span>     <span class="no">edi</span><span class="p">,</span> <span class="no">ebp</span>
</span></span><span class="line"><span class="cl"><span class="nl">.eh_frame:</span><span class="err">08048924</span>                 <span class="nf">mov</span>     <span class="no">edi</span><span class="p">,</span> <span class="p">[</span><span class="no">edi</span><span class="p">]</span>
</span></span><span class="line"><span class="cl"><span class="nl">.eh_frame:</span><span class="err">08048926</span>                 <span class="nf">mov</span>     <span class="no">esi</span><span class="p">,</span> <span class="mi">0</span>
</span></span><span class="line"><span class="cl"><span class="nl">.eh_frame:</span><span class="err">0804892</span><span class="nf">B</span>
</span></span><span class="line"><span class="cl"><span class="nl">.eh_frame:</span><span class="err">0804892</span><span class="nf">B</span> <span class="no">loc_804892B</span><span class="p">:</span>                            <span class="c1">; CODE XREF: start+71↓j
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.eh_frame:</span><span class="err">0804892</span><span class="nf">B</span>                 <span class="no">mov</span>     <span class="no">bl</span><span class="p">,</span> <span class="mi">0</span>
</span></span><span class="line"><span class="cl"><span class="nl">.eh_frame:</span><span class="err">0804892</span><span class="nf">D</span>                 <span class="no">mov</span>     <span class="no">al</span><span class="p">,</span> <span class="p">[</span><span class="no">edi</span><span class="err">+</span><span class="no">esi</span><span class="p">]</span>
</span></span><span class="line"><span class="cl"><span class="nl">.eh_frame:</span><span class="err">08048930</span>                 <span class="nf">xor</span>     <span class="no">al</span><span class="p">,</span> <span class="mi">42</span><span class="no">h</span>
</span></span><span class="line"><span class="cl"><span class="nl">.eh_frame:</span><span class="err">08048932</span>                 <span class="nf">shl</span>     <span class="no">al</span><span class="p">,</span> <span class="mi">5</span>
</span></span><span class="line"><span class="cl"><span class="nl">.eh_frame:</span><span class="err">08048935</span>                 <span class="nf">or</span>      <span class="no">bl</span><span class="p">,</span> <span class="no">al</span>
</span></span><span class="line"><span class="cl"><span class="nl">.eh_frame:</span><span class="err">08048937</span>                 <span class="nf">mov</span>     <span class="no">al</span><span class="p">,</span> <span class="p">[</span><span class="no">edi</span><span class="err">+</span><span class="no">esi</span><span class="p">]</span>
</span></span><span class="line"><span class="cl"><span class="nl">.eh_frame:</span><span class="err">0804893</span><span class="nf">A</span>                 <span class="no">xor</span>     <span class="no">al</span><span class="p">,</span> <span class="mi">42</span><span class="no">h</span>
</span></span><span class="line"><span class="cl"><span class="nl">.eh_frame:</span><span class="err">0804893</span><span class="nf">C</span>                 <span class="no">shr</span>     <span class="no">al</span><span class="p">,</span> <span class="mi">3</span>
</span></span><span class="line"><span class="cl"><span class="nl">.eh_frame:</span><span class="err">0804893</span><span class="nf">F</span>                 <span class="no">or</span>      <span class="no">bl</span><span class="p">,</span> <span class="no">al</span>
</span></span><span class="line"><span class="cl"><span class="nl">.eh_frame:</span><span class="err">08048941</span>                 <span class="nf">mov</span>     <span class="p">[</span><span class="no">edi</span><span class="err">+</span><span class="no">esi</span><span class="p">],</span> <span class="no">bl</span>
</span></span><span class="line"><span class="cl"><span class="nl">.eh_frame:</span><span class="err">08048944</span>                 <span class="nf">inc</span>     <span class="no">esi</span>
</span></span><span class="line"><span class="cl"><span class="nl">.eh_frame:</span><span class="err">08048945</span>                 <span class="nf">loop</span>    <span class="no">loc_804892B</span>
</span></span><span class="line"><span class="cl"><span class="nl">.eh_frame:</span><span class="err">08048947</span>                 <span class="nf">pop</span>     <span class="no">esi</span>
</span></span><span class="line"><span class="cl"><span class="nl">.eh_frame:</span><span class="err">08048948</span>                 <span class="nf">pop</span>     <span class="no">edi</span>
</span></span><span class="line"><span class="cl"><span class="nl">.eh_frame:</span><span class="err">08048949</span>                 <span class="nf">pop</span>     <span class="no">edx</span>
</span></span><span class="line"><span class="cl"><span class="nl">.eh_frame:</span><span class="err">0804894</span><span class="nf">A</span>                 <span class="no">pop</span>     <span class="no">ebx</span>
</span></span><span class="line"><span class="cl"><span class="nl">.eh_frame:</span><span class="err">0804894</span><span class="nf">B</span>                 <span class="no">pop</span>     <span class="no">ecx</span>
</span></span><span class="line"><span class="cl"><span class="nl">.eh_frame:</span><span class="err">0804894</span><span class="nf">C</span>                 <span class="no">mov</span>     <span class="no">eax</span><span class="p">,</span> <span class="mi">2</span>
</span></span><span class="line"><span class="cl"><span class="nl">.eh_frame:</span><span class="err">08048951</span>                 <span class="nf">add</span>     <span class="no">eax</span><span class="p">,</span> <span class="no">ebp</span>
</span></span><span class="line"><span class="cl"><span class="nl">.eh_frame:</span><span class="err">08048953</span>                 <span class="nf">mov</span>     <span class="no">eax</span><span class="p">,</span> <span class="p">[</span><span class="no">eax</span><span class="p">]</span>      <span class="c1">; mov eax,[ebp+2]
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.eh_frame:</span><span class="err">08048953</span>                                         <span class="c1">; 此时ebp = start,即地址0x08048320
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nl">.eh_frame:</span><span class="err">08048955</span>                 <span class="nf">push</span>    <span class="no">eax</span>
</span></span><span class="line"><span class="cl"><span class="nl">.eh_frame:</span><span class="err">08048956</span>                 <span class="nf">retn</span>
</span></span><span class="line"><span class="cl"><span class="nl">.eh_frame:</span><span class="err">08048956</span> <span class="nf">start</span>           <span class="no">endp</span> <span class="c1">; sp-analysis failed
</span></span></span></code></pre></div><p>伪代码：</p>
        
        <hr><p>Published on 2024-11-21 at <a href='https://username.github.io/'>终端出口</a>, last modified on 2024-11-21</p>]]></description><category>题解</category></item><item><title>SUCTF2019 - hardCpp</title><link>https://username.github.io/post/suctf2019-hardcpp/</link><pubDate>Mon, 18 Nov 2024 08:55:27 +0800</pubDate><author>satori5ama@foxmail.com (Satori5ama)</author><guid>https://username.github.io/post/suctf2019-hardcpp/</guid><description>
<![CDATA[<h1>SUCTF2019 - hardCpp</h1><p>Author: Satori5ama(satori5ama@foxmail.com)</p>
        
          <p>参考文献：<a href="https://pinguw.github.io/2024/03/26/Reverse/LLVM/">去OLLVM平坦化([SUCTF2019]hardCPP) - Pinguw&rsquo;s Blog</a></p>
<p>查壳，ELF64，无壳</p>
<p><img src="https://cdn.jsdmirror.cn/gh/Satori5ama/Figurebed@main/img/reverse/1731943536190.png" alt="1731943536190"></p>
<p>IDA中发现有多层while嵌套，内部有一个switch控制分发，观察程序流程图发现明显的平坦化痕迹。</p>
<p><img src="https://cdn.jsdmirror.cn/gh/Satori5ama/Figurebed@main/img/reverse/1731943702464.png" alt="1731943702464"></p>
        
        <hr><p>Published on 2024-11-18 at <a href='https://username.github.io/'>终端出口</a>, last modified on 2024-11-18</p>]]></description><category>题解</category></item><item><title>攻防世界 - maze</title><link>https://username.github.io/post/adworld-maze/</link><pubDate>Tue, 12 Nov 2024 08:55:27 +0800</pubDate><author>satori5ama@foxmail.com (Satori5ama)</author><guid>https://username.github.io/post/adworld-maze/</guid><description>
<![CDATA[<h1>攻防世界 - maze</h1><p>Author: Satori5ama(satori5ama@foxmail.com)</p>
        
          <p>查壳，64位elf，无壳。</p>
<p><img src="https://cdn.jsdmirror.cn/gh/Satori5ama/Figurebed@main/img/reverse/clip_image002.png" alt="img"></p>
<p>进入main函数。</p>
<p><img src="https://cdn.jsdmirror.cn/gh/Satori5ama/Figurebed@main/img/reverse/clip_image004.png" alt="img"></p>
<p>伪代码：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-c" data-lang="c"><span class="line"><span class="cl"><span class="kr">__int64</span> <span class="kr">__fastcall</span> <span class="nf">main</span><span class="p">(</span><span class="kt">int</span> <span class="n">a1</span><span class="p">,</span> <span class="kt">char</span> <span class="o">**</span><span class="n">a2</span><span class="p">,</span> <span class="kt">char</span> <span class="o">**</span><span class="n">a3</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="kr">__int64</span> <span class="n">v3</span><span class="p">;</span> <span class="c1">// rbx
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="kt">int</span> <span class="n">v4</span><span class="p">;</span> <span class="c1">// eax
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="kt">bool</span> <span class="n">v5</span><span class="p">;</span> <span class="c1">// bp
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="kt">bool</span> <span class="n">v6</span><span class="p">;</span> <span class="c1">// al
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">v7</span><span class="p">;</span> <span class="c1">// rdi
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="kt">int</span> <span class="n">v9</span><span class="p">;</span> <span class="c1">// [rsp+0h] [rbp-28h] BYREF
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="kt">int</span> <span class="n">v10</span><span class="p">[</span><span class="mi">9</span><span class="p">];</span> <span class="c1">// [rsp+4h] [rbp-24h] BYREF
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl">  <span class="n">v10</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="n">v9</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="nf">puts</span><span class="p">(</span><span class="s">&#34;Input flag:&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">  <span class="nf">scanf</span><span class="p">(</span><span class="s">&#34;%s&#34;</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">s1</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">  <span class="k">if</span> <span class="p">(</span> <span class="nf">strlen</span><span class="p">(</span><span class="o">&amp;</span><span class="n">s1</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">24</span> <span class="o">||</span> <span class="nf">strncmp</span><span class="p">(</span><span class="o">&amp;</span><span class="n">s1</span><span class="p">,</span> <span class="s">&#34;nctf{&#34;</span><span class="p">,</span> <span class="mi">5uLL</span><span class="p">)</span> <span class="o">||</span> <span class="o">*</span><span class="p">(</span><span class="o">&amp;</span><span class="n">byte_6010BF</span> <span class="o">+</span> <span class="mi">24</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">125</span> <span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="p">{</span>
</span></span><span class="line"><span class="cl"><span class="nl">LABEL_22</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">    <span class="nf">puts</span><span class="p">(</span><span class="s">&#34;Wrong flag!&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="nf">exit</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="n">v3</span> <span class="o">=</span> <span class="mi">5LL</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="k">if</span> <span class="p">(</span> <span class="nf">strlen</span><span class="p">(</span><span class="o">&amp;</span><span class="n">s1</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span> <span class="o">&gt;</span> <span class="mi">5</span> <span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">while</span> <span class="p">(</span> <span class="mi">1</span> <span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="n">v4</span> <span class="o">=</span> <span class="o">*</span><span class="p">(</span><span class="o">&amp;</span><span class="n">s1</span> <span class="o">+</span> <span class="n">v3</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">      <span class="n">v5</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">      <span class="k">if</span> <span class="p">(</span> <span class="n">v4</span> <span class="o">&gt;</span> <span class="mi">78</span> <span class="p">)</span>
</span></span><span class="line"><span class="cl">      <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="p">(</span> <span class="p">(</span><span class="kt">unsigned</span> <span class="kr">__int8</span><span class="p">)</span><span class="n">v4</span> <span class="o">==</span> <span class="mi">79</span> <span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="p">{</span>
</span></span><span class="line"><span class="cl">          <span class="n">v6</span> <span class="o">=</span> <span class="nf">sub_400650</span><span class="p">(</span><span class="n">v10</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">          <span class="k">goto</span> <span class="n">LABEL_14</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="p">(</span> <span class="p">(</span><span class="kt">unsigned</span> <span class="kr">__int8</span><span class="p">)</span><span class="n">v4</span> <span class="o">==</span> <span class="mi">111</span> <span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="p">{</span>
</span></span><span class="line"><span class="cl">          <span class="n">v6</span> <span class="o">=</span> <span class="nf">sub_400660</span><span class="p">(</span><span class="n">v10</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">          <span class="k">goto</span> <span class="n">LABEL_14</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">      <span class="p">}</span>
</span></span><span class="line"><span class="cl">      <span class="k">else</span>
</span></span><span class="line"><span class="cl">      <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="p">(</span> <span class="p">(</span><span class="kt">unsigned</span> <span class="kr">__int8</span><span class="p">)</span><span class="n">v4</span> <span class="o">==</span> <span class="mi">46</span> <span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="p">{</span>
</span></span><span class="line"><span class="cl">          <span class="n">v6</span> <span class="o">=</span> <span class="nf">sub_400670</span><span class="p">(</span><span class="o">&amp;</span><span class="n">v9</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">          <span class="k">goto</span> <span class="n">LABEL_14</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="p">(</span> <span class="p">(</span><span class="kt">unsigned</span> <span class="kr">__int8</span><span class="p">)</span><span class="n">v4</span> <span class="o">==</span> <span class="mi">48</span> <span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="p">{</span>
</span></span><span class="line"><span class="cl">          <span class="n">v6</span> <span class="o">=</span> <span class="nf">sub_400680</span><span class="p">(</span><span class="o">&amp;</span><span class="n">v9</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="nl">LABEL_14</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">          <span class="n">v5</span> <span class="o">=</span> <span class="n">v6</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">      <span class="p">}</span>
</span></span><span class="line"><span class="cl">      <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="p">(</span><span class="kt">unsigned</span> <span class="kr">__int8</span><span class="p">)</span><span class="nf">sub_400690</span><span class="p">((</span><span class="kr">__int64</span><span class="p">)</span><span class="n">asc_601060</span><span class="p">,</span> <span class="n">v10</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">v9</span><span class="p">)</span> <span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="k">goto</span> <span class="n">LABEL_22</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">      <span class="k">if</span> <span class="p">(</span> <span class="o">++</span><span class="n">v3</span> <span class="o">&gt;=</span> <span class="nf">strlen</span><span class="p">(</span><span class="o">&amp;</span><span class="n">s1</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span> <span class="p">)</span>
</span></span><span class="line"><span class="cl">      <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="p">(</span> <span class="n">v5</span> <span class="p">)</span>
</span></span><span class="line"><span class="cl">          <span class="k">break</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="nl">LABEL_20</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">        <span class="n">v7</span> <span class="o">=</span> <span class="s">&#34;Wrong flag!&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="k">goto</span> <span class="n">LABEL_21</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">      <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="k">if</span> <span class="p">(</span> <span class="n">asc_601060</span><span class="p">[</span><span class="mi">8</span> <span class="o">*</span> <span class="n">v9</span> <span class="o">+</span> <span class="n">v10</span><span class="p">[</span><span class="mi">0</span><span class="p">]]</span> <span class="o">!=</span> <span class="mi">35</span> <span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="k">goto</span> <span class="n">LABEL_20</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="n">v7</span> <span class="o">=</span> <span class="s">&#34;Congratulations!&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="nl">LABEL_21</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">  <span class="nf">puts</span><span class="p">(</span><span class="n">v7</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">  <span class="k">return</span> <span class="mi">0LL</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></div><p>观察第一段，可以发现flag形式为nctf{开头，长度为24，结尾为}的字符串。</p>
        
        <hr><p>Published on 2024-11-12 at <a href='https://username.github.io/'>终端出口</a>, last modified on 2024-11-12</p>]]></description><category>题解</category></item><item><title>2024 ICPC Invitational Wuhan Site (partial)</title><link>https://username.github.io/post/2024-icpc-invitational-wuhan-site/</link><pubDate>Mon, 01 Apr 2024 08:52:25 +0800</pubDate><author>satori5ama@foxmail.com (Satori5ama)</author><guid>https://username.github.io/post/2024-icpc-invitational-wuhan-site/</guid><description>
<![CDATA[<h1>2024 ICPC Invitational Wuhan Site (partial)</h1><p>Author: Satori5ama(satori5ama@foxmail.com)</p>
        
          <p>我真傻，真的</p>
<p>好多小马题，<del>小马害人</del></p>
<p><a href="https://codeforces.com/gym/105143">Dashboard - 2024 ICPC National Invitational Collegiate Programming Contest, Wuhan Site - Codeforces</a></p>
<h1 id="i">
<a class="header-anchor" href="#i"></a>
I
</h1><p>水签，比较相邻位逆序个数就行了</p>
<p>就这改题时看了一眼就会的破题我比赛还看了5分钟，紫砂了。</p>
        
        <hr><p>Published on 2024-04-01 at <a href='https://username.github.io/'>终端出口</a>, last modified on 2024-07-21</p>]]></description><category>题解</category></item><item><title>两凸包间距离——GJK算法（POJ 3608）</title><link>https://username.github.io/post/gjk-algorithm/</link><pubDate>Sun, 21 Jul 2024 08:52:25 +0800</pubDate><author>satori5ama@foxmail.com (Satori5ama)</author><guid>https://username.github.io/post/gjk-algorithm/</guid><description>
<![CDATA[<h1>两凸包间距离——GJK算法（POJ 3608）</h1><p>Author: Satori5ama(satori5ama@foxmail.com)</p>
        
          <p>起因：数模期末大作业，求空域在平面投影上相互之间最短距离是否小于安全距离。空域投影的形状有圆形，凸多边形，跑道形。</p>
<p>使用GJK算法的代码：</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="cp">#include&lt;bits/stdc++.h&gt;  
</span></span></span><span class="line"><span class="cl"><span class="cp"></span><span class="k">using</span> <span class="k">namespace</span> <span class="n">std</span><span class="p">;</span>  
</span></span><span class="line"><span class="cl"><span class="cp">#define double long double  
</span></span></span><span class="line"><span class="cl"><span class="cp">#define x first  
</span></span></span><span class="line"><span class="cl"><span class="cp">#define y second  
</span></span></span><span class="line"><span class="cl"><span class="cp">#define MIN(a,b,c,d) (min(min(min(a,b),c),d))  
</span></span></span><span class="line"><span class="cl"><span class="cp">#define MAX(a,b,c,d) (max(max(max(a,b),c),d))  
</span></span></span><span class="line"><span class="cl"><span class="cp"></span><span class="k">typedef</span> <span class="n">pair</span><span class="o">&lt;</span><span class="kt">double</span><span class="p">,</span> <span class="kt">double</span><span class="o">&gt;</span> <span class="n">P</span><span class="p">;</span>  
</span></span><span class="line"><span class="cl"><span class="k">typedef</span> <span class="kt">unsigned</span> <span class="n">uint</span><span class="p">;</span>  
</span></span><span class="line"><span class="cl"><span class="k">const</span> <span class="n">P</span> <span class="n">origin</span> <span class="o">=</span> <span class="n">P</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>  
</span></span><span class="line"><span class="cl"><span class="k">const</span> <span class="kt">double</span> <span class="n">eps</span> <span class="o">=</span> <span class="mf">1e-6</span><span class="p">;</span>    
</span></span><span class="line"><span class="cl"><span class="k">struct</span> <span class="nc">shape</span> <span class="p">{</span>  
</span></span><span class="line"><span class="cl">    <span class="kt">int</span> <span class="n">type</span><span class="p">;</span>  
</span></span><span class="line"><span class="cl">    <span class="n">vector</span><span class="o">&lt;</span><span class="n">P</span><span class="o">&gt;</span> <span class="n">poly</span><span class="p">;</span>  
</span></span><span class="line"><span class="cl"><span class="p">};</span>  
</span></span><span class="line"><span class="cl"><span class="kr">inline</span> <span class="n">P</span> <span class="nf">add</span><span class="p">(</span><span class="n">P</span> <span class="n">a</span><span class="p">,</span> <span class="n">P</span> <span class="n">b</span><span class="p">)</span> <span class="p">{</span> <span class="k">return</span> <span class="n">P</span><span class="p">(</span><span class="n">a</span><span class="p">.</span><span class="n">x</span> <span class="o">+</span> <span class="n">b</span><span class="p">.</span><span class="n">x</span><span class="p">,</span> <span class="n">a</span><span class="p">.</span><span class="n">y</span> <span class="o">+</span> <span class="n">b</span><span class="p">.</span><span class="n">y</span><span class="p">);</span> <span class="p">}</span>  
</span></span><span class="line"><span class="cl"><span class="kr">inline</span> <span class="n">P</span> <span class="nf">del</span><span class="p">(</span><span class="n">P</span> <span class="n">a</span><span class="p">,</span> <span class="n">P</span> <span class="n">b</span><span class="p">)</span> <span class="p">{</span> <span class="k">return</span> <span class="n">P</span><span class="p">(</span><span class="n">a</span><span class="p">.</span><span class="n">x</span> <span class="o">-</span> <span class="n">b</span><span class="p">.</span><span class="n">x</span><span class="p">,</span> <span class="n">a</span><span class="p">.</span><span class="n">y</span> <span class="o">-</span> <span class="n">b</span><span class="p">.</span><span class="n">y</span><span class="p">);</span> <span class="p">}</span>  
</span></span><span class="line"><span class="cl"><span class="kr">inline</span> <span class="n">P</span> <span class="nf">Minus</span><span class="p">(</span><span class="n">P</span> <span class="n">a</span><span class="p">)</span> <span class="p">{</span> <span class="k">return</span> <span class="n">P</span><span class="p">(</span><span class="o">-</span><span class="n">a</span><span class="p">.</span><span class="n">x</span><span class="p">,</span> <span class="o">-</span><span class="n">a</span><span class="p">.</span><span class="n">y</span><span class="p">);</span> <span class="p">}</span>  
</span></span><span class="line"><span class="cl"><span class="kr">inline</span> <span class="kt">double</span> <span class="nf">dot</span><span class="p">(</span><span class="n">P</span> <span class="n">a</span><span class="p">,</span> <span class="n">P</span> <span class="n">b</span><span class="p">)</span> <span class="p">{</span> <span class="k">return</span> <span class="n">a</span><span class="p">.</span><span class="n">x</span> <span class="o">*</span> <span class="n">b</span><span class="p">.</span><span class="n">x</span> <span class="o">+</span> <span class="n">a</span><span class="p">.</span><span class="n">y</span> <span class="o">*</span> <span class="n">b</span><span class="p">.</span><span class="n">y</span><span class="p">;</span> <span class="p">}</span>  
</span></span><span class="line"><span class="cl"><span class="kr">inline</span> <span class="kt">double</span> <span class="nf">det</span><span class="p">(</span><span class="n">P</span> <span class="n">a</span><span class="p">,</span> <span class="n">P</span> <span class="n">b</span><span class="p">)</span> <span class="p">{</span> <span class="k">return</span> <span class="n">a</span><span class="p">.</span><span class="n">x</span> <span class="o">*</span> <span class="n">b</span><span class="p">.</span><span class="n">y</span> <span class="o">-</span> <span class="n">a</span><span class="p">.</span><span class="n">y</span> <span class="o">*</span> <span class="n">b</span><span class="p">.</span><span class="n">x</span><span class="p">;</span> <span class="p">}</span>  
</span></span><span class="line"><span class="cl"><span class="kr">inline</span> <span class="n">P</span> <span class="nf">mul</span><span class="p">(</span><span class="n">P</span> <span class="n">a</span><span class="p">,</span> <span class="kt">double</span> <span class="n">b</span><span class="p">)</span> <span class="p">{</span> <span class="k">return</span> <span class="n">P</span><span class="p">(</span><span class="n">a</span><span class="p">.</span><span class="n">x</span> <span class="o">*</span> <span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">.</span><span class="n">y</span> <span class="o">*</span> <span class="n">b</span><span class="p">);</span> <span class="p">}</span>  
</span></span><span class="line"><span class="cl"><span class="kr">inline</span> <span class="kt">bool</span> <span class="nf">isEquals</span><span class="p">(</span><span class="n">P</span> <span class="n">p1</span><span class="p">,</span> <span class="n">P</span> <span class="n">p2</span><span class="p">)</span> <span class="p">{</span>  
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="n">abs</span><span class="p">(</span><span class="n">p1</span><span class="p">.</span><span class="n">x</span> <span class="o">-</span> <span class="n">p2</span><span class="p">.</span><span class="n">x</span><span class="p">)</span> <span class="o">&lt;</span> <span class="n">eps</span> <span class="o">&amp;&amp;</span> <span class="n">abs</span><span class="p">(</span><span class="n">p1</span><span class="p">.</span><span class="n">y</span> <span class="o">-</span> <span class="n">p2</span><span class="p">.</span><span class="n">y</span><span class="p">)</span> <span class="o">&lt;</span> <span class="n">eps</span><span class="p">;</span>  
</span></span><span class="line"><span class="cl"><span class="p">}</span>  
</span></span><span class="line"><span class="cl"><span class="kr">inline</span> <span class="kt">double</span> <span class="nf">len</span><span class="p">(</span><span class="n">P</span> <span class="n">a</span><span class="p">)</span> <span class="p">{</span> <span class="k">return</span> <span class="n">sqrt</span><span class="p">(</span><span class="n">a</span><span class="p">.</span><span class="n">x</span> <span class="o">*</span> <span class="n">a</span><span class="p">.</span><span class="n">x</span> <span class="o">+</span> <span class="n">a</span><span class="p">.</span><span class="n">y</span> <span class="o">*</span> <span class="n">a</span><span class="p">.</span><span class="n">y</span><span class="p">);</span> <span class="p">}</span>  
</span></span><span class="line"><span class="cl"><span class="kr">inline</span> <span class="n">P</span> <span class="nf">normalize</span><span class="p">(</span><span class="n">P</span> <span class="n">a</span><span class="p">)</span> <span class="p">{</span> <span class="k">return</span> <span class="n">P</span><span class="p">(</span><span class="n">a</span><span class="p">.</span><span class="n">x</span> <span class="o">/</span> <span class="n">len</span><span class="p">(</span><span class="n">a</span><span class="p">),</span> <span class="n">a</span><span class="p">.</span><span class="n">y</span> <span class="o">/</span> <span class="n">len</span><span class="p">(</span><span class="n">a</span><span class="p">));</span> <span class="p">}</span>  
</span></span><span class="line"><span class="cl"><span class="kr">inline</span> <span class="n">P</span> <span class="nf">support_poly</span><span class="p">(</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">P</span><span class="o">&gt;</span> <span class="n">poly</span><span class="p">,</span> <span class="n">P</span> <span class="n">dir</span><span class="p">)</span> <span class="p">{</span>  
</span></span><span class="line"><span class="cl">    <span class="n">P</span> <span class="n">sup</span> <span class="o">=</span> <span class="n">poly</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>  
</span></span><span class="line"><span class="cl">    <span class="kt">double</span> <span class="n">maxs</span> <span class="o">=</span> <span class="n">dot</span><span class="p">(</span><span class="n">sup</span><span class="p">,</span> <span class="n">dir</span><span class="p">);</span>  
</span></span><span class="line"><span class="cl">    <span class="k">for</span> <span class="p">(</span><span class="n">uint</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">poly</span><span class="p">.</span><span class="n">size</span><span class="p">();</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>  
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="p">(</span><span class="n">dot</span><span class="p">(</span><span class="n">poly</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">dir</span><span class="p">)</span> <span class="o">&gt;</span> <span class="n">maxs</span><span class="p">)</span> <span class="p">{</span>  
</span></span><span class="line"><span class="cl">            <span class="n">maxs</span> <span class="o">=</span> <span class="n">dot</span><span class="p">(</span><span class="n">poly</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">dir</span><span class="p">);</span>  
</span></span><span class="line"><span class="cl">            <span class="n">sup</span> <span class="o">=</span> <span class="n">poly</span><span class="p">[</span><span class="n">i</span><span class="p">];</span>  
</span></span><span class="line"><span class="cl">        <span class="p">}</span>  
</span></span><span class="line"><span class="cl">    <span class="p">}</span>  
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="n">sup</span><span class="p">;</span>  
</span></span><span class="line"><span class="cl"><span class="p">}</span>  
</span></span><span class="line"><span class="cl"><span class="kr">inline</span> <span class="n">P</span> <span class="nf">support_circle</span><span class="p">(</span><span class="kt">int</span> <span class="n">ox</span><span class="p">,</span> <span class="kt">int</span> <span class="n">oy</span><span class="p">,</span> <span class="kt">int</span> <span class="n">r</span><span class="p">,</span> <span class="n">P</span> <span class="n">dir</span><span class="p">)</span> <span class="p">{</span>  
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="n">add</span><span class="p">(</span><span class="n">P</span><span class="p">(</span><span class="n">ox</span><span class="p">,</span> <span class="n">oy</span><span class="p">),</span> <span class="n">mul</span><span class="p">(</span><span class="n">normalize</span><span class="p">(</span><span class="n">dir</span><span class="p">),</span> <span class="n">r</span><span class="p">));</span>  
</span></span><span class="line"><span class="cl"><span class="p">}</span>  
</span></span><span class="line"><span class="cl"><span class="kr">inline</span> <span class="n">P</span> <span class="nf">support</span><span class="p">(</span><span class="n">shape</span> <span class="n">s</span><span class="p">,</span> <span class="n">P</span> <span class="n">dir</span><span class="p">)</span> <span class="p">{</span>  
</span></span><span class="line"><span class="cl">    <span class="k">if</span> <span class="p">(</span><span class="n">s</span><span class="p">.</span><span class="n">type</span> <span class="o">==</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span>  
</span></span><span class="line"><span class="cl">        <span class="kt">double</span> <span class="n">ox</span> <span class="o">=</span> <span class="p">(</span><span class="n">s</span><span class="p">.</span><span class="n">poly</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="n">x</span> <span class="o">+</span> <span class="n">s</span><span class="p">.</span><span class="n">poly</span><span class="p">[</span><span class="mi">1</span><span class="p">].</span><span class="n">x</span> <span class="o">+</span> <span class="n">s</span><span class="p">.</span><span class="n">poly</span><span class="p">[</span><span class="mi">2</span><span class="p">].</span><span class="n">x</span> <span class="o">+</span> <span class="n">s</span><span class="p">.</span><span class="n">poly</span><span class="p">[</span><span class="mi">3</span><span class="p">].</span><span class="n">x</span><span class="p">)</span> <span class="o">/</span> <span class="mf">4.0</span><span class="p">,</span>  
</span></span><span class="line"><span class="cl">               <span class="n">oy</span> <span class="o">=</span> <span class="p">(</span><span class="n">s</span><span class="p">.</span><span class="n">poly</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="n">y</span> <span class="o">+</span> <span class="n">s</span><span class="p">.</span><span class="n">poly</span><span class="p">[</span><span class="mi">1</span><span class="p">].</span><span class="n">y</span> <span class="o">+</span> <span class="n">s</span><span class="p">.</span><span class="n">poly</span><span class="p">[</span><span class="mi">2</span><span class="p">].</span><span class="n">y</span> <span class="o">+</span> <span class="n">s</span><span class="p">.</span><span class="n">poly</span><span class="p">[</span><span class="mi">3</span><span class="p">].</span><span class="n">y</span><span class="p">)</span> <span class="o">/</span> <span class="mf">4.0</span><span class="p">,</span>  
</span></span><span class="line"><span class="cl">               <span class="n">r</span> <span class="o">=</span> <span class="n">fabs</span><span class="p">((</span><span class="n">s</span><span class="p">.</span><span class="n">poly</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="n">y</span> <span class="o">-</span> <span class="n">s</span><span class="p">.</span><span class="n">poly</span><span class="p">[</span><span class="mi">1</span><span class="p">].</span><span class="n">y</span><span class="p">)</span> <span class="o">/</span> <span class="mf">2.0</span><span class="p">);</span>  
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="n">support_circle</span><span class="p">(</span><span class="n">ox</span><span class="p">,</span> <span class="n">oy</span><span class="p">,</span> <span class="n">r</span><span class="p">,</span> <span class="n">dir</span><span class="p">);</span>  
</span></span><span class="line"><span class="cl">    <span class="p">}</span>  
</span></span><span class="line"><span class="cl">    <span class="k">if</span> <span class="p">(</span><span class="n">s</span><span class="p">.</span><span class="n">type</span> <span class="o">==</span> <span class="mi">5</span><span class="p">)</span> <span class="p">{</span>  
</span></span><span class="line"><span class="cl">        <span class="kt">double</span> <span class="n">r</span> <span class="o">=</span> <span class="n">fabs</span><span class="p">((</span><span class="n">s</span><span class="p">.</span><span class="n">poly</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="n">y</span> <span class="o">-</span> <span class="n">s</span><span class="p">.</span><span class="n">poly</span><span class="p">[</span><span class="mi">1</span><span class="p">].</span><span class="n">y</span><span class="p">)</span> <span class="o">/</span> <span class="mf">2.0</span><span class="p">);</span>  
</span></span><span class="line"><span class="cl">        <span class="kt">double</span> <span class="n">ox1</span> <span class="o">=</span> <span class="n">MIN</span><span class="p">(</span><span class="n">s</span><span class="p">.</span><span class="n">poly</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="n">x</span><span class="p">,</span> <span class="n">s</span><span class="p">.</span><span class="n">poly</span><span class="p">[</span><span class="mi">1</span><span class="p">].</span><span class="n">x</span><span class="p">,</span> <span class="n">s</span><span class="p">.</span><span class="n">poly</span><span class="p">[</span><span class="mi">2</span><span class="p">].</span><span class="n">x</span><span class="p">,</span> <span class="n">s</span><span class="p">.</span><span class="n">poly</span><span class="p">[</span><span class="mi">3</span><span class="p">].</span><span class="n">x</span><span class="p">)</span> <span class="o">+</span> <span class="n">r</span><span class="p">,</span>  
</span></span><span class="line"><span class="cl">               <span class="n">oy1</span> <span class="o">=</span> <span class="p">(</span><span class="n">s</span><span class="p">.</span><span class="n">poly</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="n">y</span> <span class="o">+</span> <span class="n">s</span><span class="p">.</span><span class="n">poly</span><span class="p">[</span><span class="mi">1</span><span class="p">].</span><span class="n">y</span><span class="p">)</span> <span class="o">/</span> <span class="mf">2.0</span><span class="p">;</span>  
</span></span><span class="line"><span class="cl">        <span class="kt">double</span> <span class="n">ox2</span> <span class="o">=</span> <span class="n">MAX</span><span class="p">(</span><span class="n">s</span><span class="p">.</span><span class="n">poly</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="n">x</span><span class="p">,</span> <span class="n">s</span><span class="p">.</span><span class="n">poly</span><span class="p">[</span><span class="mi">1</span><span class="p">].</span><span class="n">x</span><span class="p">,</span> <span class="n">s</span><span class="p">.</span><span class="n">poly</span><span class="p">[</span><span class="mi">2</span><span class="p">].</span><span class="n">x</span><span class="p">,</span> <span class="n">s</span><span class="p">.</span><span class="n">poly</span><span class="p">[</span><span class="mi">3</span><span class="p">].</span><span class="n">x</span><span class="p">)</span> <span class="o">-</span> <span class="n">r</span><span class="p">,</span>  
</span></span><span class="line"><span class="cl">               <span class="n">oy2</span> <span class="o">=</span> <span class="p">(</span><span class="n">s</span><span class="p">.</span><span class="n">poly</span><span class="p">[</span><span class="mi">2</span><span class="p">].</span><span class="n">y</span> <span class="o">+</span> <span class="n">s</span><span class="p">.</span><span class="n">poly</span><span class="p">[</span><span class="mi">3</span><span class="p">].</span><span class="n">y</span><span class="p">)</span> <span class="o">/</span> <span class="mf">2.0</span><span class="p">;</span>  
</span></span><span class="line"><span class="cl">        <span class="n">vector</span><span class="o">&lt;</span><span class="n">P</span><span class="o">&gt;</span> <span class="n">poly</span><span class="p">;</span>  
</span></span><span class="line"><span class="cl">        <span class="n">poly</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="n">P</span><span class="p">(</span><span class="n">ox1</span><span class="p">,</span> <span class="n">s</span><span class="p">.</span><span class="n">poly</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="n">y</span><span class="p">));</span>  
</span></span><span class="line"><span class="cl">        <span class="n">poly</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="n">P</span><span class="p">(</span><span class="n">ox1</span><span class="p">,</span> <span class="n">s</span><span class="p">.</span><span class="n">poly</span><span class="p">[</span><span class="mi">1</span><span class="p">].</span><span class="n">y</span><span class="p">));</span>  
</span></span><span class="line"><span class="cl">        <span class="n">poly</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="n">P</span><span class="p">(</span><span class="n">ox2</span><span class="p">,</span> <span class="n">s</span><span class="p">.</span><span class="n">poly</span><span class="p">[</span><span class="mi">2</span><span class="p">].</span><span class="n">y</span><span class="p">));</span>  
</span></span><span class="line"><span class="cl">        <span class="n">poly</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="n">P</span><span class="p">(</span><span class="n">ox2</span><span class="p">,</span> <span class="n">s</span><span class="p">.</span><span class="n">poly</span><span class="p">[</span><span class="mi">3</span><span class="p">].</span><span class="n">y</span><span class="p">));</span>  
</span></span><span class="line"><span class="cl">        <span class="n">P</span> <span class="n">sup</span> <span class="o">=</span> <span class="n">support_poly</span><span class="p">(</span><span class="n">poly</span><span class="p">,</span> <span class="n">dir</span><span class="p">);</span>  
</span></span><span class="line"><span class="cl">        <span class="kt">double</span> <span class="n">maxs</span> <span class="o">=</span> <span class="n">dot</span><span class="p">(</span><span class="n">sup</span><span class="p">,</span> <span class="n">dir</span><span class="p">);</span>  
</span></span><span class="line"><span class="cl">        <span class="n">P</span> <span class="n">res</span> <span class="o">=</span> <span class="n">support_circle</span><span class="p">(</span><span class="n">ox1</span><span class="p">,</span> <span class="n">oy1</span><span class="p">,</span> <span class="n">r</span><span class="p">,</span> <span class="n">dir</span><span class="p">);</span>  
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="p">(</span><span class="n">dot</span><span class="p">(</span><span class="n">res</span><span class="p">,</span> <span class="n">dir</span><span class="p">)</span> <span class="o">&gt;</span> <span class="n">maxs</span><span class="p">)</span> <span class="p">{</span>  
</span></span><span class="line"><span class="cl">            <span class="n">maxs</span> <span class="o">=</span> <span class="n">dot</span><span class="p">(</span><span class="n">res</span><span class="p">,</span> <span class="n">dir</span><span class="p">);</span>  
</span></span><span class="line"><span class="cl">            <span class="n">sup</span> <span class="o">=</span> <span class="n">res</span><span class="p">;</span>  
</span></span><span class="line"><span class="cl">        <span class="p">}</span>  
</span></span><span class="line"><span class="cl">        <span class="n">res</span> <span class="o">=</span> <span class="n">support_circle</span><span class="p">(</span><span class="n">ox2</span><span class="p">,</span> <span class="n">oy2</span><span class="p">,</span> <span class="n">r</span><span class="p">,</span> <span class="n">dir</span><span class="p">);</span>  
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="p">(</span><span class="n">dot</span><span class="p">(</span><span class="n">res</span><span class="p">,</span> <span class="n">dir</span><span class="p">)</span> <span class="o">&gt;</span> <span class="n">maxs</span><span class="p">)</span> <span class="p">{</span>  
</span></span><span class="line"><span class="cl">            <span class="n">maxs</span> <span class="o">=</span> <span class="n">dot</span><span class="p">(</span><span class="n">res</span><span class="p">,</span> <span class="n">dir</span><span class="p">);</span>  
</span></span><span class="line"><span class="cl">            <span class="n">sup</span> <span class="o">=</span> <span class="n">res</span><span class="p">;</span>  
</span></span><span class="line"><span class="cl">        <span class="p">}</span>  
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="n">sup</span><span class="p">;</span>  
</span></span><span class="line"><span class="cl">    <span class="p">}</span>  
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="n">support_poly</span><span class="p">(</span><span class="n">s</span><span class="p">.</span><span class="n">poly</span><span class="p">,</span> <span class="n">dir</span><span class="p">);</span>  
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="kr">inline</span> <span class="kt">double</span> <span class="nf">calcTriangleArea</span><span class="p">(</span><span class="n">P</span> <span class="n">p1</span><span class="p">,</span> <span class="n">P</span> <span class="n">p2</span><span class="p">,</span> <span class="n">P</span> <span class="n">p3</span><span class="p">)</span> <span class="p">{</span>  
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="n">fabs</span><span class="p">(</span><span class="n">det</span><span class="p">(</span><span class="n">del</span><span class="p">(</span><span class="n">p2</span><span class="p">,</span> <span class="n">p1</span><span class="p">),</span> <span class="n">del</span><span class="p">(</span><span class="n">p3</span><span class="p">,</span> <span class="n">p1</span><span class="p">)))</span> <span class="o">/</span> <span class="mf">2.0</span><span class="p">;</span>  
</span></span><span class="line"><span class="cl"><span class="p">}</span>  
</span></span><span class="line"><span class="cl"><span class="kr">inline</span> <span class="kt">bool</span> <span class="nf">isContainOrigin</span><span class="p">(</span><span class="n">P</span> <span class="n">p1</span><span class="p">,</span> <span class="n">P</span> <span class="n">p2</span><span class="p">,</span> <span class="n">P</span> <span class="n">p3</span><span class="p">)</span> <span class="p">{</span>  
</span></span><span class="line"><span class="cl">    <span class="kt">double</span> <span class="n">s1</span> <span class="o">=</span> <span class="n">calcTriangleArea</span><span class="p">(</span><span class="n">origin</span><span class="p">,</span> <span class="n">p1</span><span class="p">,</span> <span class="n">p2</span><span class="p">);</span>  
</span></span><span class="line"><span class="cl">    <span class="kt">double</span> <span class="n">s2</span> <span class="o">=</span> <span class="n">calcTriangleArea</span><span class="p">(</span><span class="n">origin</span><span class="p">,</span> <span class="n">p1</span><span class="p">,</span> <span class="n">p3</span><span class="p">);</span>  
</span></span><span class="line"><span class="cl">    <span class="kt">double</span> <span class="n">s3</span> <span class="o">=</span> <span class="n">calcTriangleArea</span><span class="p">(</span><span class="n">origin</span><span class="p">,</span> <span class="n">p2</span><span class="p">,</span> <span class="n">p3</span><span class="p">);</span>  
</span></span><span class="line"><span class="cl">    <span class="kt">double</span> <span class="n">s</span> <span class="o">=</span> <span class="n">calcTriangleArea</span><span class="p">(</span><span class="n">p1</span><span class="p">,</span> <span class="n">p2</span><span class="p">,</span> <span class="n">p3</span><span class="p">);</span>  
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="n">fabs</span><span class="p">(</span><span class="n">s1</span> <span class="o">+</span> <span class="n">s2</span> <span class="o">+</span> <span class="n">s3</span> <span class="o">-</span> <span class="n">s</span><span class="p">)</span> <span class="o">&lt;</span> <span class="n">eps</span><span class="p">;</span>  
</span></span><span class="line"><span class="cl"><span class="p">}</span>  
</span></span><span class="line"><span class="cl"><span class="kr">inline</span> <span class="n">P</span> <span class="nf">GetNextDirection</span><span class="p">(</span><span class="n">P</span> <span class="n">a</span><span class="p">,</span> <span class="n">P</span> <span class="n">b</span><span class="p">)</span> <span class="p">{</span>  
</span></span><span class="line"><span class="cl">    <span class="n">P</span> <span class="n">ab</span> <span class="o">=</span> <span class="n">del</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">),</span> <span class="n">ao</span> <span class="o">=</span> <span class="n">del</span><span class="p">(</span><span class="n">origin</span><span class="p">,</span> <span class="n">a</span><span class="p">);</span>  
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="n">P</span><span class="p">(</span><span class="o">-</span><span class="n">ab</span><span class="p">.</span><span class="n">y</span> <span class="o">*</span> <span class="n">det</span><span class="p">(</span><span class="n">ab</span><span class="p">,</span> <span class="n">ao</span><span class="p">),</span> <span class="n">ab</span><span class="p">.</span><span class="n">x</span> <span class="o">*</span> <span class="n">det</span><span class="p">(</span><span class="n">ab</span><span class="p">,</span> <span class="n">ao</span><span class="p">));</span>  
</span></span><span class="line"><span class="cl"><span class="p">}</span>  
</span></span><span class="line"><span class="cl"><span class="kr">inline</span> <span class="n">P</span> <span class="nf">NearestPointToOrigin</span><span class="p">(</span><span class="n">P</span> <span class="n">a</span><span class="p">,</span> <span class="n">P</span> <span class="n">b</span><span class="p">)</span> <span class="p">{</span>  
</span></span><span class="line"><span class="cl">    <span class="k">if</span> <span class="p">(</span><span class="n">isEquals</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">))</span> <span class="k">return</span> <span class="n">Minus</span><span class="p">(</span><span class="n">a</span><span class="p">);</span>  
</span></span><span class="line"><span class="cl">    <span class="n">P</span> <span class="n">ab</span> <span class="o">=</span> <span class="n">del</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">),</span> <span class="n">ba</span> <span class="o">=</span> <span class="n">del</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">),</span> <span class="n">ap</span> <span class="o">=</span> <span class="n">Minus</span><span class="p">(</span><span class="n">a</span><span class="p">),</span> <span class="n">bp</span> <span class="o">=</span> <span class="n">Minus</span><span class="p">(</span><span class="n">b</span><span class="p">);</span>  
</span></span><span class="line"><span class="cl">    <span class="k">if</span> <span class="p">(</span><span class="n">dot</span><span class="p">(</span><span class="n">ab</span><span class="p">,</span> <span class="n">ap</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="o">&amp;&amp;</span> <span class="n">dot</span><span class="p">(</span><span class="n">ba</span><span class="p">,</span> <span class="n">bp</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>  
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="n">mul</span><span class="p">(</span><span class="n">normalize</span><span class="p">(</span><span class="n">GetNextDirection</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">)),</span> <span class="n">fabs</span><span class="p">(</span><span class="n">det</span><span class="p">(</span><span class="n">ab</span><span class="p">,</span> <span class="n">ap</span><span class="p">)</span> <span class="o">/</span> <span class="n">len</span><span class="p">(</span><span class="n">ab</span><span class="p">)));</span>  
</span></span><span class="line"><span class="cl">    <span class="p">}</span>  
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="n">len</span><span class="p">(</span><span class="n">a</span><span class="p">)</span> <span class="o">&lt;</span> <span class="n">len</span><span class="p">(</span><span class="n">b</span><span class="p">)</span> <span class="o">?</span> <span class="n">Minus</span><span class="p">(</span><span class="n">a</span><span class="p">)</span> <span class="o">:</span> <span class="n">Minus</span><span class="p">(</span><span class="n">b</span><span class="p">);</span>  
</span></span><span class="line"><span class="cl"><span class="p">}</span>  
</span></span><span class="line"><span class="cl"><span class="kr">inline</span> <span class="kt">bool</span> <span class="nf">isinaline</span><span class="p">(</span><span class="n">P</span> <span class="n">a</span><span class="p">,</span> <span class="n">P</span> <span class="n">b</span><span class="p">,</span> <span class="n">P</span> <span class="n">c</span><span class="p">)</span> <span class="p">{</span>  
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="n">fabs</span><span class="p">(</span><span class="n">det</span><span class="p">(</span><span class="n">del</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">),</span> <span class="n">del</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">c</span><span class="p">)))</span> <span class="o">&lt;</span> <span class="n">eps</span><span class="p">;</span>  
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="kr">inline</span> <span class="kt">double</span> <span class="nf">GJK</span><span class="p">(</span><span class="n">shape</span> <span class="n">p</span><span class="p">,</span> <span class="n">shape</span> <span class="n">q</span><span class="p">,</span> <span class="n">P</span> <span class="n">D</span><span class="p">)</span> <span class="p">{</span>  
</span></span><span class="line"><span class="cl">    <span class="n">P</span> <span class="n">A</span> <span class="o">=</span> <span class="n">del</span><span class="p">(</span><span class="n">support</span><span class="p">(</span><span class="n">p</span><span class="p">,</span> <span class="n">D</span><span class="p">),</span> <span class="n">support</span><span class="p">(</span><span class="n">q</span><span class="p">,</span> <span class="n">Minus</span><span class="p">(</span><span class="n">D</span><span class="p">)));</span>  
</span></span><span class="line"><span class="cl">    <span class="n">vector</span><span class="o">&lt;</span><span class="n">P</span><span class="o">&gt;</span> <span class="n">simplex</span><span class="p">;</span>  
</span></span><span class="line"><span class="cl">    <span class="n">simplex</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="n">A</span><span class="p">);</span>  
</span></span><span class="line"><span class="cl">    <span class="n">P</span> <span class="n">B</span> <span class="o">=</span> <span class="n">del</span><span class="p">(</span><span class="n">support</span><span class="p">(</span><span class="n">p</span><span class="p">,</span> <span class="n">Minus</span><span class="p">(</span><span class="n">D</span><span class="p">)),</span> <span class="n">support</span><span class="p">(</span><span class="n">q</span><span class="p">,</span> <span class="n">D</span><span class="p">));</span>  
</span></span><span class="line"><span class="cl">    <span class="n">simplex</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="n">B</span><span class="p">);</span>  
</span></span><span class="line"><span class="cl">    <span class="k">if</span> <span class="p">(</span><span class="n">isinaline</span><span class="p">(</span><span class="n">A</span><span class="p">,</span> <span class="n">B</span><span class="p">,</span> <span class="n">origin</span><span class="p">))</span> <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>  
</span></span><span class="line"><span class="cl">    <span class="n">D</span> <span class="o">=</span> <span class="n">NearestPointToOrigin</span><span class="p">(</span><span class="n">A</span><span class="p">,</span> <span class="n">B</span><span class="p">);</span>  
</span></span><span class="line"><span class="cl">    <span class="k">while</span> <span class="p">(</span><span class="nb">true</span><span class="p">)</span> <span class="p">{</span>  
</span></span><span class="line"><span class="cl">        <span class="n">P</span> <span class="n">C</span> <span class="o">=</span> <span class="n">del</span><span class="p">(</span><span class="n">support</span><span class="p">(</span><span class="n">p</span><span class="p">,</span> <span class="n">D</span><span class="p">),</span> <span class="n">support</span><span class="p">(</span><span class="n">q</span><span class="p">,</span> <span class="n">Minus</span><span class="p">(</span><span class="n">D</span><span class="p">)));</span>  
</span></span><span class="line"><span class="cl">        <span class="n">A</span> <span class="o">=</span> <span class="n">simplex</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span> <span class="n">simplex</span><span class="p">.</span><span class="n">pop_back</span><span class="p">();</span>  
</span></span><span class="line"><span class="cl">        <span class="n">B</span> <span class="o">=</span> <span class="n">simplex</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span> <span class="n">simplex</span><span class="p">.</span><span class="n">pop_back</span><span class="p">();</span>  
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="p">(</span><span class="n">isContainOrigin</span><span class="p">(</span><span class="n">A</span><span class="p">,</span> <span class="n">B</span><span class="p">,</span> <span class="n">C</span><span class="p">))</span> <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>  
</span></span><span class="line"><span class="cl">        <span class="kt">double</span> <span class="n">da</span> <span class="o">=</span> <span class="n">dot</span><span class="p">(</span><span class="n">A</span><span class="p">,</span> <span class="n">D</span><span class="p">),</span> <span class="n">db</span> <span class="o">=</span> <span class="n">dot</span><span class="p">(</span><span class="n">B</span><span class="p">,</span> <span class="n">D</span><span class="p">),</span> <span class="n">dc</span> <span class="o">=</span> <span class="n">dot</span><span class="p">(</span><span class="n">C</span><span class="p">,</span> <span class="n">D</span><span class="p">);</span>  
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="p">(</span><span class="n">fabs</span><span class="p">(</span><span class="n">da</span> <span class="o">-</span> <span class="n">dc</span><span class="p">)</span> <span class="o">&lt;</span> <span class="n">eps</span> <span class="o">||</span> <span class="n">fabs</span><span class="p">(</span><span class="n">db</span> <span class="o">-</span> <span class="n">dc</span><span class="p">)</span> <span class="o">&lt;</span> <span class="n">eps</span><span class="p">)</span> <span class="k">return</span> <span class="n">len</span><span class="p">(</span><span class="n">D</span><span class="p">);</span>  
</span></span><span class="line"><span class="cl">        <span class="n">P</span> <span class="n">p1</span> <span class="o">=</span> <span class="n">NearestPointToOrigin</span><span class="p">(</span><span class="n">A</span><span class="p">,</span> <span class="n">C</span><span class="p">),</span> <span class="n">p2</span> <span class="o">=</span> <span class="n">NearestPointToOrigin</span><span class="p">(</span><span class="n">B</span><span class="p">,</span> <span class="n">C</span><span class="p">);</span>  
</span></span><span class="line"><span class="cl">        <span class="n">simplex</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="n">C</span><span class="p">);</span>  
</span></span><span class="line"><span class="cl">        <span class="kt">double</span> <span class="n">len1</span> <span class="o">=</span> <span class="n">len</span><span class="p">(</span><span class="n">p1</span><span class="p">),</span> <span class="n">len2</span> <span class="o">=</span> <span class="n">len</span><span class="p">(</span><span class="n">p2</span><span class="p">);</span>  
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="p">(</span><span class="n">len1</span> <span class="o">&lt;</span> <span class="n">len2</span><span class="p">)</span> <span class="p">{</span>  
</span></span><span class="line"><span class="cl">            <span class="n">simplex</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="n">A</span><span class="p">);</span>  
</span></span><span class="line"><span class="cl">            <span class="n">D</span> <span class="o">=</span> <span class="n">p1</span><span class="p">;</span>  
</span></span><span class="line"><span class="cl">        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>  
</span></span><span class="line"><span class="cl">            <span class="n">simplex</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="n">B</span><span class="p">);</span>  
</span></span><span class="line"><span class="cl">            <span class="n">D</span> <span class="o">=</span> <span class="n">p2</span><span class="p">;</span>  
</span></span><span class="line"><span class="cl">        <span class="p">}</span>  
</span></span><span class="line"><span class="cl">    <span class="p">}</span>  
</span></span><span class="line"><span class="cl"><span class="p">}</span>  
</span></span><span class="line"><span class="cl">  
</span></span><span class="line"><span class="cl"><span class="n">shape</span> <span class="n">s</span><span class="p">[</span><span class="mi">105</span><span class="p">];</span>  
</span></span><span class="line"><span class="cl"><span class="kt">double</span> <span class="n">h1</span><span class="p">[</span><span class="mi">105</span><span class="p">],</span> <span class="n">h2</span><span class="p">[</span><span class="mi">105</span><span class="p">],</span> <span class="n">t1</span><span class="p">[</span><span class="mi">105</span><span class="p">],</span> <span class="n">t2</span><span class="p">[</span><span class="mi">105</span><span class="p">];</span>  
</span></span><span class="line"><span class="cl"><span class="k">const</span> <span class="kt">double</span> <span class="n">hc</span> <span class="o">=</span> <span class="mf">0.3</span><span class="p">,</span> <span class="n">pc</span> <span class="o">=</span> <span class="mi">5</span><span class="p">,</span> <span class="n">tc</span> <span class="o">=</span> <span class="mf">1.5</span><span class="p">;</span>  
</span></span><span class="line"><span class="cl">  
</span></span><span class="line"><span class="cl"><span class="kt">int</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>  
</span></span><span class="line"><span class="cl">    <span class="n">freopen</span><span class="p">(</span><span class="s">&#34;data.in&#34;</span><span class="p">,</span> <span class="s">&#34;r&#34;</span><span class="p">,</span> <span class="n">stdin</span><span class="p">);</span>  
</span></span><span class="line"><span class="cl">    <span class="n">freopen</span><span class="p">(</span><span class="s">&#34;data.out&#34;</span><span class="p">,</span> <span class="s">&#34;w&#34;</span><span class="p">,</span> <span class="n">stdout</span><span class="p">);</span>  
</span></span><span class="line"><span class="cl">    <span class="kt">int</span> <span class="n">id</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>  
</span></span><span class="line"><span class="cl">    <span class="k">while</span> <span class="p">(</span><span class="n">scanf</span><span class="p">(</span><span class="s">&#34;%d&#34;</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">id</span><span class="p">)</span> <span class="o">!=</span> <span class="n">EOF</span><span class="p">)</span> <span class="p">{</span>  
</span></span><span class="line"><span class="cl">        <span class="n">scanf</span><span class="p">(</span><span class="s">&#34;%d&#34;</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">s</span><span class="p">[</span><span class="n">id</span><span class="p">].</span><span class="n">type</span><span class="p">);</span>  
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="p">(</span><span class="n">s</span><span class="p">[</span><span class="n">id</span><span class="p">].</span><span class="n">type</span> <span class="o">==</span> <span class="mi">1</span> <span class="o">||</span> <span class="n">s</span><span class="p">[</span><span class="n">id</span><span class="p">].</span><span class="n">type</span> <span class="o">==</span> <span class="mi">5</span><span class="p">)</span> <span class="p">{</span>  
</span></span><span class="line"><span class="cl">            <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="mi">4</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>  
</span></span><span class="line"><span class="cl">                <span class="kt">double</span> <span class="n">u</span><span class="p">,</span> <span class="n">v</span><span class="p">;</span>  
</span></span><span class="line"><span class="cl">                <span class="n">scanf</span><span class="p">(</span><span class="s">&#34;%Lf%Lf&#34;</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">u</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">v</span><span class="p">);</span>  
</span></span><span class="line"><span class="cl">                <span class="n">s</span><span class="p">[</span><span class="n">id</span><span class="p">].</span><span class="n">poly</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="n">P</span><span class="p">(</span><span class="n">u</span><span class="p">,</span> <span class="n">v</span><span class="p">));</span>  
</span></span><span class="line"><span class="cl">            <span class="p">}</span>  
</span></span><span class="line"><span class="cl">        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>  
</span></span><span class="line"><span class="cl">            <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">s</span><span class="p">[</span><span class="n">id</span><span class="p">].</span><span class="n">type</span> <span class="o">+</span> <span class="mi">2</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>  
</span></span><span class="line"><span class="cl">                <span class="kt">double</span> <span class="n">u</span><span class="p">,</span> <span class="n">v</span><span class="p">;</span>  
</span></span><span class="line"><span class="cl">                <span class="n">scanf</span><span class="p">(</span><span class="s">&#34;%Lf%Lf&#34;</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">u</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">v</span><span class="p">);</span>  
</span></span><span class="line"><span class="cl">                <span class="n">s</span><span class="p">[</span><span class="n">id</span><span class="p">].</span><span class="n">poly</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="n">P</span><span class="p">(</span><span class="n">u</span><span class="p">,</span> <span class="n">v</span><span class="p">));</span>  
</span></span><span class="line"><span class="cl">            <span class="p">}</span>  
</span></span><span class="line"><span class="cl">        <span class="p">}</span>  
</span></span><span class="line"><span class="cl">        <span class="n">scanf</span><span class="p">(</span><span class="s">&#34;%Lf%Lf%Lf%Lf&#34;</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">h1</span><span class="p">[</span><span class="n">id</span><span class="p">],</span> <span class="o">&amp;</span><span class="n">h2</span><span class="p">[</span><span class="n">id</span><span class="p">],</span> <span class="o">&amp;</span><span class="n">t1</span><span class="p">[</span><span class="n">id</span><span class="p">],</span> <span class="o">&amp;</span><span class="n">t2</span><span class="p">[</span><span class="n">id</span><span class="p">]);</span>  
</span></span><span class="line"><span class="cl">    <span class="p">}</span>  
</span></span><span class="line"><span class="cl">    <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;=</span> <span class="n">id</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>  
</span></span><span class="line"><span class="cl">        <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">j</span> <span class="o">=</span> <span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">;</span> <span class="n">j</span> <span class="o">&lt;=</span> <span class="n">id</span><span class="p">;</span> <span class="n">j</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>  
</span></span><span class="line"><span class="cl">            <span class="k">if</span> <span class="p">(((</span><span class="n">h2</span><span class="p">[</span><span class="n">j</span><span class="p">]</span> <span class="o">&lt;</span> <span class="n">h1</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">&amp;&amp;</span> <span class="n">h1</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">-</span> <span class="n">h2</span><span class="p">[</span><span class="n">j</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="n">hc</span><span class="p">)</span> <span class="o">||</span>  
</span></span><span class="line"><span class="cl">                 <span class="p">(</span><span class="n">h2</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">&lt;</span> <span class="n">h1</span><span class="p">[</span><span class="n">j</span><span class="p">]</span> <span class="o">&amp;&amp;</span> <span class="n">h1</span><span class="p">[</span><span class="n">j</span><span class="p">]</span> <span class="o">-</span> <span class="n">h2</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="n">hc</span><span class="p">))</span> <span class="o">||</span>  
</span></span><span class="line"><span class="cl">                <span class="p">((</span><span class="n">t2</span><span class="p">[</span><span class="n">j</span><span class="p">]</span> <span class="o">&lt;</span> <span class="n">t1</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">&amp;&amp;</span> <span class="n">t1</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">-</span> <span class="n">t2</span><span class="p">[</span><span class="n">j</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="n">tc</span><span class="p">)</span> <span class="o">||</span>  
</span></span><span class="line"><span class="cl">                 <span class="p">(</span><span class="n">t2</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">&lt;</span> <span class="n">t1</span><span class="p">[</span><span class="n">j</span><span class="p">]</span> <span class="o">&amp;&amp;</span> <span class="n">t1</span><span class="p">[</span><span class="n">j</span><span class="p">]</span> <span class="o">-</span> <span class="n">t2</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="n">tc</span><span class="p">))</span> <span class="o">||</span>  
</span></span><span class="line"><span class="cl">                <span class="n">GJK</span><span class="p">(</span><span class="n">s</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">s</span><span class="p">[</span><span class="n">j</span><span class="p">],</span> <span class="n">P</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span> <span class="o">&gt;=</span> <span class="n">pc</span><span class="p">)</span>  
</span></span><span class="line"><span class="cl">                <span class="k">continue</span><span class="p">;</span>  
</span></span><span class="line"><span class="cl">            <span class="n">printf</span><span class="p">(</span><span class="s">&#34;%d %d</span><span class="se">\n</span><span class="s">&#34;</span><span class="p">,</span> <span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">);</span>  
</span></span><span class="line"><span class="cl">        <span class="p">}</span>  
</span></span><span class="line"><span class="cl">    <span class="p">}</span>  
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>  
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></div><p>发现POJ 3608其实是这个问题的一个子集，稍微改改输入部分可以通过板子题POJ 3608。</p>
        
        <hr><p>Published on 2024-07-21 at <a href='https://username.github.io/'>终端出口</a>, last modified on 2024-07-21</p>]]></description><category>题解</category></item><item><title>Codeforces Round 921 (Div. 2)</title><link>https://username.github.io/post/codeforces-round-921-div.-2/</link><pubDate>Mon, 20 May 2024 16:55:27 +0800</pubDate><author>satori5ama@foxmail.com (Satori5ama)</author><guid>https://username.github.io/post/codeforces-round-921-div.-2/</guid><description>
<![CDATA[<h1>Codeforces Round 921 (Div. 2)</h1><p>Author: Satori5ama(satori5ama@foxmail.com)</p>
        
          <p>好久以前的div2拖到现在才改真是唐完了。</p>
<p><a href="https://codeforces.com/contest/1925">Dashboard - Codeforces Round 921 (Div. 2) - Codeforces</a></p>
<h1 id="tag">
<a class="header-anchor" href="#tag"></a>
Tag
</h1><p>概率论，线段树，数学</p>
<h1 id="d">
<a class="header-anchor" href="#d"></a>
D
</h1><p>概率论没学好导致的。</p>
<p>期望的贡献可以分为两部分，第一部分是原始$f_i$数组产生的贡献，第二部分是增加的数产生的贡献，注意到第二部分和原数组没有任何关系，只与增加的方案相关。</p>
        
        <hr><p>Published on 2024-05-20 at <a href='https://username.github.io/'>终端出口</a>, last modified on 2024-05-24</p>]]></description><category>题解</category></item><item><title>The 2024 Hunan Multi-School Programming Training Contest Round 4 (partial)</title><link>https://username.github.io/post/2024-hunan-multi-school-4/</link><pubDate>Mon, 01 Apr 2024 08:52:25 +0800</pubDate><author>satori5ama@foxmail.com (Satori5ama)</author><guid>https://username.github.io/post/2024-hunan-multi-school-4/</guid><description>
<![CDATA[<h1>The 2024 Hunan Multi-School Programming Training Contest Round 4 (partial)</h1><p>Author: Satori5ama(satori5ama@foxmail.com)</p>
        
          <p>公式好像写多了，Latex得加载好一会儿。</p>
<p><a href="https://codeforces.com/gym/514727">Hunan Collegiate Championship Ⅳ 2024 (feat. Yokohama Regional 2021) - Codeforces</a></p>
<h3 id="tag">
<a class="header-anchor" href="#tag"></a>
Tag
</h3><p>随机化（蒙特卡洛法），偏序，图论转化</p>
<h3 id="a">
<a class="header-anchor" href="#a"></a>
A
</h3><p>相邻两个球相交首尾相接求体积并，给出公式，签到题</p>
        
        <hr><p>Published on 2024-04-01 at <a href='https://username.github.io/'>终端出口</a>, last modified on 2024-04-28</p>]]></description><category>题解</category></item><item><title>牛客练习赛74</title><link>https://username.github.io/post/newcoder-challenge-74/</link><pubDate>Fri, 12 Apr 2024 08:52:25 +0800</pubDate><author>satori5ama@foxmail.com (Satori5ama)</author><guid>https://username.github.io/post/newcoder-challenge-74/</guid><description>
<![CDATA[<h1>牛客练习赛74</h1><p>Author: Satori5ama(satori5ama@foxmail.com)</p>
        
          <p>省流：唐了但没完全唐。</p>
<p><a href="https://ac.nowcoder.com/acm/contest/78936">牛客挑战赛74</a></p>
<h3 id="a">
<a class="header-anchor" href="#a"></a>
A
</h3><p>简单DP。用第二维状态0表示没拿的多一，1表示拿和没拿的相等，2表示拿了的多一。</p>
<p>挂了一发的原因是起始状态忘记初始化了。</p>
        
        <hr><p>Published on 2024-04-12 at <a href='https://username.github.io/'>终端出口</a>, last modified on 2024-04-12</p>]]></description><category>题解</category></item></channel></rss>